<div class="card basic-box">
    <div class="card-header corpus-info" *ngIf="corpora.length > 1">
        Query for {{ currentCorpus.name }} ({{ currentCorpus === primaryCorpus ? 'primary' : 'secondary - only filtering'}})
        <span class="corpus-controls">   <!-- for small displays -->
            <span class="corpus-controls-small">
                <form [formGroup]="corpusSelect">
                    <label for="chooseCurrent">active:</label>
                    <select name="chooseCurrent" formControlName="currentCorpus">
                        <option *ngFor="let corpus of corpora" [ngValue]="corpus" selected="{{ corpus === currentCorpus ? 'selected' : '' }}">{{corpus.id}}</option>
                    </select>
                    <label for="choosePrimary">primary:</label>
                    <select name="choosePrimary" formControlName="primaryCorpus">
                        <option *ngFor="let corpus of corpora" [ngValue]="corpus" selected="{{ corpus === primaryCorpus ? 'selected' : '' }}">{{corpus.id}}</option>
                    </select>
                </form>
            </span>
            <span class="corpus-controls-normal"> <!-- medium+ displays -->
                <i *ngIf="currentCorpus === primaryCorpus" class="bi bi-1-square"></i>
                <i 
                    *ngIf="currentCorpus !== primaryCorpus" 
                    class="bi bi-2-square clickable"
                    (mouseenter)="switchIcon($event, 'bi-2-square', 'bi-1-square')"
                    (mouseleave)="switchIcon($event, 'bi-1-square', 'bi-2-square')"
                    (click)="setAsPrimary()"    
                ></i>
                <i class="bi bi-layout-split clickable"
                    (mouseenter)="switchIcon($event, '', 'text-danger')"
                    (mouseleave)="switchIcon($event, 'text-danger', '')">
                </i>
                <span *ngIf="corpora.length > 2 && currentCorpus !== primaryCorpus">
                    <i class="bi bi-arrow-up {{ isArrowEnabled ('up') ? 'arrow-enabled' : 'arrow-disabled' }}" (click)="moveCorpus('up')"></i>
                    <i class="bi bi-arrow-down {{ isArrowEnabled ('down') ? 'arrow-enabled' : 'arrow-disabled' }}" (click)="moveCorpus('down')"></i>
                </span>
            </span>
        </span>
    </div>
    <div class="card-header text-center theme-dark">
        <div class="row justify-content-center align-content-center">
            <h5 class="card-title my-auto py-1">Basic Search</h5>
        </div>
    </div>
    <div class="card-body">
        <spoco-query-row [queryRowIndex]="qr" *ngFor="let qr of qrRange()"></spoco-query-row>
        <div class="plus-minus float-end">
            <button class="btn row-button theme-dark" (click)="moreRows()">
                +
            </button>
            <button class="btn row-button theme-dark" (click)="lessRows()" [disabled]="queryRowNumber <= 1">
                -
            </button>
        </div>
        <div class="row">
            <div class="col-sm-12 col-md-6 offset-md-3">
                <hr>
            </div>
        </div>
        <spoco-filters></spoco-filters>
    </div>
</div>